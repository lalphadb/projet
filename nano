<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class InscriptionCours extends Model
{
   use HasFactory;
   
   /**
    * Le nom de la table associée au modèle.
    */
   protected $table = 'inscriptions_cours';
   
   /**
    * Les attributs qui peuvent être assignés en masse.
    */
   protected $fillable = [
       'membre_id',
       'cours_id',
       'session_id',
       'statut',
       'raison_changement'
   ];
   
   /**
    * Les attributs qui doivent être castés.
    */
   protected $casts = [
       'created_at' => 'datetime',
       'updated_at' => 'datetime',
   ];
   
   /**
    * Relation avec le modèle Membre.
    */
   public function membre()
   {
       return $this->belongsTo(Membre::class);
   }
   
   /**
    * Relation avec le modèle Cours.
    */
   public function cours()
   {
       return $this->belongsTo(Cours::class);
   }
   
   /**
    * Relation avec le modèle CoursSession.
    */
   public function session()
   {
       return $this->belongsTo(CoursSession::class, 'session_id');
   }
   
   /**
    * Scope pour les inscriptions actives.
    */
   public function scopeActives($query)
   {
       return $query->where('statut', 'actif');
   }
   
   /**
    * Scope pour une session spécifique.
    */
   public function scopePourSession($query, $sessionId)
   {
       return $query->where('session_id', $sessionId);
   }
}
